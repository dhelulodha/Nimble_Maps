<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Google Maps</title>
    <style>
        #map{
            height: 400px;
            width:100%;
        }
    </style>
</head>
<body>


    <h1>My Google Map</h1>
    <div id="map"></div>
    <script>
        function initMap(){

            //map options
            var options= {
                zoom:15,
                center:{lat:13.0827,lng:80.2707}
            }

            //new map
            var map= new
            google.maps.Map(document.getElementById('map'),options);

            // add listen for click on maps
            google.maps.event.addListener(map,'click',
            function(event){
                //add marker
                addMarker({coords:event.latLng});

            });



            // //new markers
            // var marker=new google.maps.Marker({
            //     position:{lat:12.8259,lng:80.0395},
            //     map:map,
            //     icon:'srm.jpg'
            // });

            // //info window
            // var infowindow=new google.maps.InfoWindow({
            //     content:'<h1>Potheri</h1>'
            // });

            // marker.addListener('click',function(){
            //     infowindow.open(map,marker);
            // });


            //array for markers

            var markers=[
            {
                coords:{lat:12.8259,lng:80.0395},
                iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
                content:'<h1>Potheri</h1>'
            },
            {
                coords:{lat:13.0595,lng:80.2425},
                iconImage:'light2.png',
                content:'<h1>Nungabakam</h1>'
            },
            {
                coords:{lat:12.9760,lng:80.2212},
                iconImage:'Marker for potholes 1.png'
            },
            {
                coords:{lat:12.9617,lng:80.2596},
                iconImage:'Marker for potholes 3.png'
            },
            {
                coords:{lat:12.9532,lng:80.1416},
                iconImage:'Marker for potholes 4.png'
            }
            ];

            

            //loop through markers

            for(var i=0;i<markers.length;i++)
            {
                //add markers
                addMarker(markers[i]);
            }


            function addMarker(props){
            //new markers
            var marker=new google.maps.Marker({
                position:props.coords,
                map:map,
                //icon:props.iconImage
            });

            //check for custom icon
            if(props.iconImage)
            {
                //set icon image
                marker.setIcon(props.iconImage);
            }

            //check for custom content
            if(props.content)
            {
                //set info window
            var infowindow=new google.maps.InfoWindow({
                content:props.content
            });

            marker.addListener('click',function(){
                infowindow.open(map,marker);
            });
            }

            }

        }
    </script>

        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCuysSPlZ_whvmpXZYn-W-2qBzs1TLZ9JE&callback=initMap">
        </script>

    
</body>
</html>